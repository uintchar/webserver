- [1. 标准 C 库文件 IO 函数](#1-标准-c-库文件-io-函数)
  - [1.1. FILE 结构体](#11-file-结构体)
  - [1.2. 标准 C 库文件 IO 函数](#12-标准-c-库文件-io-函数)
    - [1.2.1. fopen](#121-fopen)
    - [1.2.2. fclose](#122-fclose)
    - [1.2.3. fread](#123-fread)
    - [1.2.4. fwrite](#124-fwrite)
    - [1.2.5. fgets](#125-fgets)
    - [1.2.6. fputs](#126-fputs)
    - [1.2.7. fscanf](#127-fscanf)
    - [1.2.8. fprintf](#128-fprintf)
    - [1.2.9. fseek](#129-fseek)
    - [1.2.10. fgetc](#1210-fgetc)
    - [1.2.11. fputc](#1211-fputc)
    - [1.2.12. ftell](#1212-ftell)
    - [1.2.13. feof](#1213-feof)
    - [1.2.14. fflush](#1214-fflush)
- [2. Linux IO 系统调用](#2-linux-io-系统调用)
  - [2.1. 标准 C 库 IO 和 Linux IO 系统调用的区别](#21-标准-c-库-io-和-linux-io-系统调用的区别)
  - [2.2. 文件 IO 系统调用](#22-文件-io-系统调用)
    - [2.2.1. open](#221-open)
    - [2.2.2. umask](#222-umask)
    - [2.2.3. close](#223-close)
    - [2.2.4. read](#224-read)
    - [2.2.5. write](#225-write)
    - [2.2.6. lseek](#226-lseek)
    - [2.2.7. stat](#227-stat)
    - [2.2.8. lstat](#228-lstat)
  - [2.3. 文件属性操作函数](#23-文件属性操作函数)
    - [2.3.1. aceess](#231-aceess)
    - [2.3.2. chmod](#232-chmod)
    - [2.3.3. chown](#233-chown)
    - [2.3.4. truncate](#234-truncate)
  - [2.4. 目录操作函数](#24-目录操作函数)
    - [2.4.1. mkdir](#241-mkdir)
    - [2.4.2. rmdir](#242-rmdir)
    - [2.4.3. rename](#243-rename)
    - [2.4.4. chdir](#244-chdir)
    - [2.4.5. getcwd](#245-getcwd)
  - [2.5. 目录遍历函数](#25-目录遍历函数)
    - [2.5.1. opendir](#251-opendir)
    - [2.5.2. readdir](#252-readdir)
    - [2.5.3. closedir](#253-closedir)
    - [2.5.4. Demo：获取目录下所有普通文件的个数](#254-demo获取目录下所有普通文件的个数)
  - [2.6. 文件描述符操作函数](#26-文件描述符操作函数)
    - [2.6.1. dup](#261-dup)
    - [2.6.2. dup2](#262-dup2)
    - [2.6.3. fcntl](#263-fcntl)
    - [2.6.4. 使用范例](#264-使用范例)

# 1. 标准 C 库文件 IO 函数

## 1.1. FILE 结构体

```cpp {class=line-numbers}
struct FILE
{
  // 文件描述符
  // 文件读写指针
  // 缓冲区指针
}
```

- stdin, STDIN_FILENO

## 1.2. 标准 C 库文件 IO 函数

### 1.2.1. fopen

### 1.2.2. fclose

### 1.2.3. fread

### 1.2.4. fwrite

### 1.2.5. fgets

- 和 `gets` 的对比

### 1.2.6. fputs

- 和 `puts` 的对比

### 1.2.7. fscanf

- 和 `scanf` 的对比

### 1.2.8. fprintf

- 和 `printf` 的对比

### 1.2.9. fseek

### 1.2.10. fgetc

### 1.2.11. fputc

### 1.2.12. ftell

### 1.2.13. feof

### 1.2.14. fflush

# 2. Linux IO 系统调用

## 2.1. 标准 C 库 IO 和 Linux IO 系统调用的区别

- 标准 C 库具有读写缓冲区
- 移植性
- 调用效率
- 使用场景：网络通信

## 2.2. 文件 IO 系统调用

### 2.2.1. open

### 2.2.2. umask

### 2.2.3. close

### 2.2.4. read

### 2.2.5. write

- 利用 `read` 和 `write` 编写复制文件的函数

### 2.2.6. lseek

- 移动文件指针到文件头
- 获取当前文件指针的位置
- 获取文件长度
- 拓展文件的长度

### 2.2.7. stat

### 2.2.8. lstat

- 模拟实现 `ls` 指令

## 2.3. 文件属性操作函数

### 2.3.1. aceess

### 2.3.2. chmod

### 2.3.3. chown

### 2.3.4. truncate

## 2.4. 目录操作函数

### 2.4.1. mkdir

### 2.4.2. rmdir

### 2.4.3. rename

### 2.4.4. chdir

### 2.4.5. getcwd

## 2.5. 目录遍历函数

### 2.5.1. opendir

### 2.5.2. readdir

### 2.5.3. closedir

### 2.5.4. Demo：获取目录下所有普通文件的个数

## 2.6. 文件描述符操作函数

### 2.6.1. dup

```cpp {class=line-numbers}
int dup(int oldfd);
/**
   * @brief:
   *  - 复制文件描述符，使用文件描述符表中最小未使用的描述符作为新的描述符；
   *  - 新旧文件描述符可以互换使用，它们指向同一个打开的文件且共享文件指针偏移量和文件状态标志；
   *  - 新旧文件描述符不共享文件描述符标志（close-on-exec），对于复制的文件描述符 close-on-exec 标志是关闭的；
   * @param:
   *  - int oldfd
   * @return:
   *  - 成功：newfd
   *  - 失败：-1
   **/
```

### 2.6.2. dup2

```cpp {class=line-numbers}
int dup2(int oldfd, int newfd);
/**
   * @brief:
   *  - 重定向文件描述符，使得 newfd 指向 old 所指向的文件；
   *  - oldfd 必须是一个有效的文件描述符；如果 newfd 之前是打开的，则会将其自动关闭；
   *  - 关闭 newfd 所指向的文件并将 newfd 重定向到 oldfd 的过程是原子性的；
   * @param:
   *  - int oldfd
   *  - int newfd
   * @return:
   *  - 成功：newfd
   *  - 失败：-1
   **/
```

### 2.6.3. fcntl

- 复制文件描述符
- 修改或者获取文件描述符的状态 flag

### 2.6.4. 使用范例

- `dup2` 重定向

```cpp {class=line-numbers}

```